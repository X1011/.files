#! /usr/bin/env bash
set -o errexit

pacman --query --quiet --explicit > ~/bak/pkg-list.txt

args="$@"
sync() {
	sudo gdrive sync upload --delete-extraneous "$@" $args \
	| sed -e '/] Uploading/ s/ -> .*//'
}

sync ~    0B18ofr1i46T3OWNXaEEwdkdpck0
# gdrive doesn't process .gdriveignore files in subdirectories, so i'm using a separate job here so the Chrome folder can have its own .gdriveignore
sync ~/.config/google-chrome/Default 0B18ofr1i46T3N0lVUHFKQS1ONnc
sync /etc 0B18ofr1i46T3VmIyMVdncFBKbFU
